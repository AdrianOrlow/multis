webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s=i("1mcD"),o=i.n(s),n=i("uLgv"),r=(i("dih4"),i("IZMb")),l=i.n(r),c={name:"Login",data:function(){return{login:!1,agreed:!1,more:!1,email:"",password:"",name:"",city:"",phone:"",profileimg:"https://firebasestorage.googleapis.com/v0/b/vlocal-ato.appspot.com/o/profileimg%2Fdefault.png?alt=media&token=a6b91976-6678-43c0-b6f7-c38d52d7fb5d",user:null,userId:null}},beforeCreate:function(){var t=this;n.a.auth().onAuthStateChanged(function(e){e&&(t.$parent.user=e)})},methods:{signIn:function(){var t=this;n.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$parent.popup=!1,t.$parent.loginPopup=!1,t.$toasted.show("Logged in",{theme:"primary",position:"bottom-right",duration:5e3})},function(e){t.$toasted.show("Error: "+e.message,{theme:"primary",position:"bottom-right",duration:5e3})})},signUp:function(){var t=this;n.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(e){t.$parent.popup=!1,t.$parent.loginPopup=!1;var i=n.a.auth().currentUser.uid;n.a.database().ref("users/"+i).set({name:t.name,city:t.city,phone:t.phone,profileimg:t.profileimg,isonline:!0}),t.$toasted.show("Signed up",{theme:"primary",position:"bottom-right",duration:5e3})},function(e){t.$toasted.show("Error: "+e.message,{theme:"primary",position:"bottom-right",duration:5e3})})},signInWithFacebook:function(){var t=this,e=new n.a.auth.FacebookAuthProvider;n.a.auth().signInWithPopup(e).then(function(e){t.$parent.loginPopup=!1;var i=n.a.auth().currentUser.uid;n.a.database().ref("users/"+i).on("value",function(e){""==e.val().name?t.$parent.editProfile=!0:t.$parent.popup=!1}),t.$toasted.show("Signed up",{theme:"primary",position:"bottom-right",duration:5e3})},function(e){t.$toasted.show("Error: "+e.message,{theme:"primary",position:"bottom-right",duration:5e3})})}},watch:{login:function(t){var e=document.getElementsByClassName("login__nav__el")[0],i=document.getElementsByClassName("login__nav__el")[1];t?(e.classList.add("login__nav__el--active"),i.classList.remove("login__nav__el--active")):(e.classList.remove("login__nav__el--active"),i.classList.add("login__nav__el--active"))},user:function(t){t&&(this.$parent.user=t)}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"login"},[i("div",{staticClass:"login__nav"},[i("div",{staticClass:"login__nav__el",class:{"login__nav__el--active":t.login},on:{click:function(e){t.login=!0}}},[t._v("Login")]),t._v(" "),i("div",{staticClass:"login__nav__el",class:{"login__nav__el--active":!t.login},staticStyle:{float:"right"},on:{click:function(e){t.login=!1}}},[t._v("Signup")])]),t._v(" "),i("div",{staticClass:"login__container"},[t.login?i("form",{staticClass:"login--card",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[i("div",{staticClass:"login__btn--fb",on:{click:t.signInWithFacebook}}),t._v(" "),i("p",{staticClass:"p--login"},[t._v("OR")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login__input",attrs:{type:"email",placeholder:"E-mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login__input",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("div",{staticClass:"login__btn--login",on:{click:t.signIn}},[t._v("Login")])]):t._e(),t._v(" "),t.login?t._e():i("div",{staticClass:"login--card"},[i("div",{staticClass:"login__btn--fb"}),t._v(" "),i("p",{staticClass:"p--login"},[t._v("OR")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login__input",attrs:{type:"email",placeholder:"E-mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login__input",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t.agreed?t._e():i("div",{staticClass:"login__btn--login login__btn--rules",on:{click:function(e){t.agreed=!t.agreed}}},[t._v("I agree to the terms & conditions")]),t._v(" "),t.agreed&&t.email&&t.password?i("div",{staticClass:"login__btn--login",on:{click:function(e){t.more=!t.more}}},[t._v("Register")]):i("div",{staticClass:"login__btn--login",staticStyle:{"pointer-events":"none",background:"rgba(0,0,0,0)"}},[t._v("Enter email & password")])])])]),t._v(" "),t.more?i("div",{staticClass:"login"},[i("div",{staticClass:"login__container",staticStyle:{height:"83%"}},[i("div",{staticClass:"login--card login--more"},[i("p",{staticClass:"p--login",staticStyle:{margin:"0","font-size":"1.4em","margin-bottom":"1.4em"}},[t._v("One more thing")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"login__input",staticStyle:{height:"17.5%"},attrs:{type:"text",placeholder:"Name",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticClass:"login__input",staticStyle:{height:"17.5%"},attrs:{type:"text",placeholder:"City",required:""},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"login__input",staticStyle:{height:"17.5%"},attrs:{type:"text",placeholder:"Phone number",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),t._v(" "),i("div",{staticClass:"login__btn--login",on:{click:function(e){t.more=!t.more}}},[t._v("")]),t._v(" "),i("div",{staticClass:"login__btn--login",on:{click:t.signUp}},[t._v("Register")])])])]):t._e()])},staticRenderFns:[]},d=i("VU/8")(c,_,!1,null,null,null).exports,u=(i("cWbj"),{name:"OfferInfo",data:function(){return{contact:!1,showFullPhoto:!1,edit:!1,messaging:!1,useruid:"",message:"",moreInfo:{title:"",desc:"",price:"",local:"",date:"",img:"",isvalid:null,authoruid:"",key:""},userInfo:{profileimg:"",name:"",city:"",phone:"",isonline:null}}},watch:{showFullPhoto:function(){var t=document.getElementsByClassName("modal--main__img")[0],e=document.getElementsByClassName("modal--main__container")[0],i=document.getElementsByClassName("modal--main__btns")[0];this.showFullPhoto?(t.classList.add("main__img--showfull"),e.classList.add("block--blur"),i.classList.add("block--blur")):(t.classList.remove("main__img--showfull"),e.classList.remove("block--blur"),i.classList.remove("block--blur"))},"moreInfo.isvalid":function(){if(this.edit){var t=document.getElementsByClassName("more__el--four")[0];1==this.moreInfo.isvalid?t.classList.remove("info__el--red"):t.classList.add("info__el--red")}}},methods:{closeInfo:function(){this.edit=!1,this.$parent.popup=!1,document.getElementById("offerInfo").classList.add("none")},loadInfo:function(){var t=this;if(this.$parent.user){this.messaging=!1,this.useruid=this.$parent.user.uid;var e=this.moreInfo.authoruid,i=this.useruid,a=e<i?e+"_"+i:i+"_"+e;window.messagesRef=n.a.database().ref("chats/"+a).child("messages"),n.a.database().ref("chats").orderByKey().equalTo(a).once("value",function(e){e.val()&&(t.messaging=!0,t.$bindAsArray("messages",messagesRef))})}},startChat:function(){var t=n.a.database().ref("users/"+this.useruid).child("conversators"),e=this.moreInfo.authoruid;t.child(e).set(!0);var i=n.a.database().ref("users/"+this.moreInfo.authoruid).child("conversators"),a=this.useruid;i.child(a).set(!0),this.messaging=!0,this.$bindAsArray("messages",messagesRef)},showContact:function(){var t=this,e=this.moreInfo.authoruid;n.a.database().ref("users/"+e).on("value",function(e){var i=t.userInfo;i.profileimg=e.val().profileimg,i.name=e.val().name,i.city=e.val().city,i.phone=e.val().phone,i.isonline=e.val().isonline},function(e){t.$toasted.show("Error: "+e.code,{theme:"primary",position:"bottom-right",duration:5e3})}),this.contact=!0},updateOffer:function(){n.a.database().ref("offers/").child(this.moreInfo.key).set({title:this.moreInfo.title,desc:this.moreInfo.desc,price:this.moreInfo.price+" $",local:this.moreInfo.local,date:this.moreInfo.date,img:this.moreInfo.img,isvalid:this.moreInfo.isvalid,authoruid:this.moreInfo.authoruid}),this.edit=!1,this.$parent.popup=!1,document.getElementById("offerInfo").classList.add("none"),this.$toasted.show("Offer updated successfully!",{theme:"primary",position:"bottom-right",duration:5e3})},deleteOffer:function(){n.a.database().ref("offers/").child(this.moreInfo.key).remove(),this.$parent.popup=!1,document.getElementById("offerInfo").classList.add("none"),this.$toasted.show("Removed offer successfully!",{theme:"primary",position:"bottom-right",duration:5e3})},uploadFile:function(){var t=this,e=n.a.storage().ref("offerimg/"),i=document.querySelector("#file").files[0],a=+new Date+"-"+i.name,s={contentType:i.type},o=e.child(a).put(i,s);this.$toasted.show("Uploading...",{theme:"primary",position:"bottom-right",duration:5e3}),o.then(function(t){return t.ref.getDownloadURL()}).then(function(e){return t.moreInfo.img=e})},sendMessage:function(){var t=new Date;messagesRef.push({text:this.message,time:t,uid:this.useruid})}}}),m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal--main"},[i("div",[t.edit?t._e():i("img",{staticClass:"modal--main__img",attrs:{src:t.moreInfo.img,alt:t.moreInfo.title},on:{click:function(e){t.showFullPhoto=!t.showFullPhoto}}}),t._v(" "),t.edit?i("label",{staticClass:"modal--main__upload",staticStyle:{position:"unset"}},[i("img",{staticClass:"modal--main__img",attrs:{src:t.moreInfo.img}}),t._v("\n            Click here to add image\n            "),i("input",{attrs:{id:"file",type:"file",accept:"image/*"},on:{change:t.uploadFile}})]):t._e(),t._v(" "),t.edit?t._e():i("div",{staticClass:"modal--main__container"},[i("h2",{staticClass:"modal--main__title"},[t._v(t._s(t.moreInfo.title))]),t._v(" "),i("div",{staticClass:"modal--main__descr"},[t._v(t._s(t.moreInfo.desc))]),t._v(" "),i("div",{staticClass:"modal--main__more"},[i("div",{staticClass:"more__icons"},[i("div",{staticClass:"more__el__icon icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"more__el__icon icon",staticStyle:{background:"#666"}},[t._v("")]),t._v(" "),i("div",{staticClass:"more__el__icon icon"},[t._v("")]),t._v(" "),1==t.moreInfo.isvalid?i("div",{staticClass:"more__el__icon icon more__el__icon--green"},[t._v("")]):i("div",{staticClass:"more__el__icon icon more__el__icon--red"},[t._v("")])]),t._v(" "),i("div",{staticClass:"more__info",staticStyle:{height:"100%"}},[i("div",{staticClass:"more__el more__el--one"},[t._v(t._s(t.moreInfo.price))]),t._v(" "),i("div",{staticClass:"more__el more__el--two"},[t._v(t._s(t.moreInfo.local))]),t._v(" "),i("div",{staticClass:"more__el more__el--three"},[t._v(t._s(t.moreInfo.date))]),t._v(" "),1==t.moreInfo.isvalid?i("div",{staticClass:"more__el more__el--four"},[t._v("Valid")]):i("div",{staticClass:"more__el more__el--four info__el--red"},[t._v("Invalid")])])])]),t._v(" "),t.edit?i("div",{staticClass:"modal--main__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.moreInfo.title,expression:"moreInfo.title"}],staticClass:"modal--main__title",attrs:{placeholder:"Click here to type title"},domProps:{value:t.moreInfo.title},on:{input:function(e){e.target.composing||t.$set(t.moreInfo,"title",e.target.value)}}}),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.moreInfo.desc,expression:"moreInfo.desc"}],staticClass:"modal--main__descr",attrs:{placeholder:"Click here to type description"},domProps:{value:t.moreInfo.desc},on:{input:function(e){e.target.composing||t.$set(t.moreInfo,"desc",e.target.value)}}}),t._v(" "),i("div",{staticClass:"modal--main__more"},[i("div",{staticClass:"more__icons"},[i("div",{staticClass:"more__el__icon icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"more__el__icon icon",staticStyle:{background:"#666"}},[t._v("")]),t._v(" "),i("div",{staticClass:"more__el__icon icon"},[t._v("")]),t._v(" "),1==t.moreInfo.isvalid?i("div",{staticClass:"more__el__icon icon more__el__icon--green"},[t._v("")]):i("div",{staticClass:"more__el__icon icon more__el__icon--red"},[t._v("")])]),t._v(" "),i("div",{staticClass:"more__info",staticStyle:{height:"100%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.moreInfo.price,expression:"moreInfo.price"}],staticClass:"more__el more__el--one",attrs:{placeholder:"Price",maxlength:"18",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');"},domProps:{value:t.moreInfo.price},on:{input:function(e){e.target.composing||t.$set(t.moreInfo,"price",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.moreInfo.local,expression:"moreInfo.local"}],staticClass:"more__el more__el--two",attrs:{placeholder:"City",maxlength:"18"},domProps:{value:t.moreInfo.local},on:{input:function(e){e.target.composing||t.$set(t.moreInfo,"local",e.target.value)}}}),t._v(" "),i("div",{staticClass:"more__el more__el--three"},[t._v(t._s(t.moreInfo.date))]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.moreInfo.isvalid,expression:"moreInfo.isvalid"}],staticClass:"more__el more__el--four",staticStyle:{"box-sizing":"unset",border:"none"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.moreInfo,"isvalid",e.target.multiple?i:i[0])}}},[i("option",{attrs:{selected:""},domProps:{value:!0}},[t._v("Valid")]),t._v(" "),i("option",{domProps:{value:!1}},[t._v("Invalid")])])])])]):t._e(),t._v(" "),i("div",{staticClass:"modal--main__btns"},[i("div",{staticClass:"modal--main__btn info__close",on:{click:t.closeInfo}},[t._v("Close")]),t._v(" "),t.edit?t._e():i("div",[t.moreInfo.authoruid!=t.useruid?i("div",{staticClass:"modal--main__btn info__contact",on:{click:t.showContact}},[t._v("Contact")]):i("div",[i("div",{staticClass:"modal--main__btn info__contact",staticStyle:{background:"#3498db",width:"15%",right:"25%"},on:{click:function(e){t.edit=!t.edit}}},[t._v("Edit")]),t._v(" "),i("div",{staticClass:"modal--main__btn info__contact",staticStyle:{background:"#e74c3c",width:"15%"},on:{click:t.deleteOffer}},[t._v("Delete")])])]),t._v(" "),t.edit?i("div",{staticClass:"modal--main__btn info__contact",on:{click:t.updateOffer}},[t._v("Update")]):t._e()])]),t._v(" "),t.contact?i("div",{staticClass:"modal--main__contact"},[i("div",{staticClass:"contact__title"},[t._v("Contact")]),t._v(" "),i("div",{staticClass:"contact__container"},[t.useruid?i("div",{staticClass:"contact__chat",class:{"block--blur":!t.messaging}},[i("div",{staticClass:"contact__chat__top"},[i("div",{staticClass:"contact__chat__top__container"},[i("img",{staticClass:"contact__chat__img",staticStyle:{height:"100%","vertical-align":"middle"},attrs:{src:t.userInfo.profileimg,alt:t.userInfo.name}}),t._v("\n                            "+t._s(t.userInfo.name)+"\n                        ")])]),t._v(" "),i("div",{staticClass:"contact__chat__box"},[t.messaging?i("div",{staticClass:"contact__chat__grid"},t._l(t.messages,function(e){return i("div",{key:e.id,staticClass:"contact__chat__message"},[e.uid!=t.useruid?i("img",{staticClass:"contact__chat__img",attrs:{src:t.userInfo.profileimg,alt:t.userInfo.name}}):t._e(),t._v(" "),e.uid!=t.useruid?i("div",{staticClass:"contact__chat__text"},[t._v(t._s(e.text))]):i("div",{staticClass:"contact__chat__text chat__text--right"},[t._v(t._s(e.text))])])})):t._e()]),t._v(" "),i("div",{staticClass:"contact__chat__bottom"},[i("div",{staticClass:"contact__chat__bottom__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"contact__chat__bottom__input",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),i("div",{staticClass:"contact__chat__bottom__send",on:{click:t.sendMessage}},[t._v("")])])])]):t._e(),t._v(" "),t.useruid&&!t.messaging?i("div",{staticClass:"contact__chat--info"},[i("div",{on:{click:t.startChat}},[t._v("Click here to start conversation")])]):t._e(),t._v(" "),t.useruid?t._e():i("div",{staticClass:"contact__chat--info"},[i("div",{staticStyle:{cursor:"initial",background:"rgba(0,0,0,.2)"}},[t._v("Login to start conversation")])]),t._v(" "),i("div",{staticClass:"contact__about"},[t._m(0),t._v(" "),i("img",{staticClass:"contact__about__img",attrs:{src:t.userInfo.profileimg,alt:t.userInfo.name}}),t._v(" "),i("div",{staticClass:"contact__about__container"},[i("div",{staticClass:"contact__about__elements"},[t._m(1),t._v(" "),i("div",{staticClass:"contact__about__info"},[i("div",{staticClass:"about__info__el"},[t._v(t._s(t.userInfo.name))]),t._v(" "),i("div",{staticClass:"about__info__el"},[t._v(t._s(t.userInfo.city))]),t._v(" "),i("div",{staticClass:"about__info__el"},[t._v(t._s(t.userInfo.phone))]),t._v(" "),t.userInfo.isonline?i("div",{staticClass:"profile__info__el info__el--green",staticStyle:{width:"90%"}},[t._v("Online")]):i("div",{staticClass:"profile__info__el info__el--red",staticStyle:{width:"90%"}},[t._v("Offline")])])])])])]),t._v(" "),i("div",{staticClass:"modal--main__btn info__close",staticStyle:{width:"90%"},on:{click:function(e){t.contact=!t.contact}}},[t._v("Back")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contact__about__img",staticStyle:{background:"#e1e1e1"}},[e("i",{staticClass:"fa fa-circle-o-notch fa-spin",staticStyle:{"font-size":"5em",color:"#666"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contact__about__icons"},[e("div",{staticClass:"contact__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"contact__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"contact__about__icon icon"},[this._v("")])])}]},f=i("VU/8")(u,m,!1,null,null,null).exports,v={name:"AddOffer",data:function(){return{addOffer:{title:"",desc:"",price:"",local:"",date:"",isvalid:!0,img:"",authoruid:""}}},methods:{initAddOffer:function(){var t=new Date,e=t.getDate(),i=t.getMonth()+1,a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),t=e+"."+i+"."+a,this.addOffer.date=t;var s=n.a.auth().currentUser.uid;this.addOffer.authoruid=s},closeAddOffer:function(){this.$parent.addOffer=!1,this.$parent.popup=!1},uploadFile:function(){var t=this,e=n.a.storage().ref("offerimg/"),i=document.querySelector("#file").files[0],a=+new Date+"-"+i.name,s={contentType:i.type},o=e.child(a).put(i,s);this.$toasted.show("Uploading...",{theme:"primary",position:"bottom-right",duration:5e3}),o.then(function(t){return t.ref.getDownloadURL()}).then(function(e){return t.addOffer.img=e})},newOffer:function(){var t=db.ref("offers");this.addOffer.price+=" $",t.push(this.addOffer),this.$toasted.show("Offer added successfully!",{theme:"primary",position:"bottom-right",duration:5e3}),this.closeAddOffer()}},beforeMount:function(){this.initAddOffer()}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal--main"},[i("label",{staticClass:"modal--main__upload"},[i("img",{staticClass:"modal--main__img",attrs:{src:t.addOffer.img}}),t._v("\n            Click here to add image\n            "),i("input",{attrs:{id:"file",type:"file",accept:"image/*"},on:{change:t.uploadFile}})]),t._v(" "),i("div",{staticClass:"modal--main__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.addOffer.title,expression:"addOffer.title"}],staticClass:"modal--main__title",attrs:{placeholder:"Click here to type title"},domProps:{value:t.addOffer.title},on:{input:function(e){e.target.composing||t.$set(t.addOffer,"title",e.target.value)}}}),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addOffer.desc,expression:"addOffer.desc"}],staticClass:"modal--main__descr",attrs:{placeholder:"Click here to type description"},domProps:{value:t.addOffer.desc},on:{input:function(e){e.target.composing||t.$set(t.addOffer,"desc",e.target.value)}}}),t._v(" "),i("div",{staticClass:"modal--main__more"},[t._m(0),t._v(" "),i("div",{staticClass:"more__info"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.addOffer.price,expression:"addOffer.price"}],staticClass:"more__el more__el--one",attrs:{placeholder:"Price",maxlength:"18",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');"},domProps:{value:t.addOffer.price},on:{input:function(e){e.target.composing||t.$set(t.addOffer,"price",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.addOffer.local,expression:"addOffer.local"}],staticClass:"more__el more__el--two",attrs:{placeholder:"City",maxlength:"18"},domProps:{value:t.addOffer.local},on:{input:function(e){e.target.composing||t.$set(t.addOffer,"local",e.target.value)}}}),t._v(" "),i("div",{staticClass:"more__el more__el--three"},[t._v(t._s(t.addOffer.date))]),t._v(" "),i("div",{staticClass:"more__el more__el--four"},[t._v("Valid")])])])]),t._v(" "),i("div",{staticClass:"modal--main__btn info__close",on:{click:t.closeAddOffer}},[t._v("Close")]),t._v(" "),t.addOffer.img&&t.addOffer.title&&t.addOffer.desc&&t.addOffer.price&&t.addOffer.local?i("div",{staticClass:"modal--main__btn info__contact",on:{click:t.newOffer}},[t._v("Send")]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"more__icons"},[e("div",{staticClass:"more__el__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"more__el__icon icon",staticStyle:{background:"#666"}},[this._v("")]),this._v(" "),e("div",{staticClass:"more__el__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"more__el__icon icon",staticStyle:{background:"#2ecc71"}},[this._v("")])])}]},h=i("VU/8")(v,p,!1,null,null,null).exports,g={name:"EditProfile",data:function(){return{userInfo:{profileimg:"",name:"",city:"",phone:"",isonline:""}}},methods:{loadInfo:function(){var t=this,e=n.a.auth().currentUser.uid;n.a.database().ref("users/"+e).on("value",function(e){var i=t.userInfo;i.profileimg=e.val().profileimg,i.name=e.val().name,i.city=e.val().city,i.phone=e.val().phone,i.isonline=e.val().isonline},function(e){t.$toasted.show("Error: "+e.code,{theme:"primary",position:"bottom-right",duration:5e3})})},saveInfo:function(){var t=n.a.auth().currentUser.uid;n.a.database().ref("users/").child(t).set({name:this.userInfo.name,city:this.userInfo.city,phone:this.userInfo.phone,profileimg:this.userInfo.profileimg,isonline:this.userInfo.isonline}),this.$toasted.show("Profile info updated successfully!",{theme:"primary",position:"bottom-right",duration:5e3}),this.$parent.popup=!1,this.$parent.editProfile=!1},uploadFile:function(){var t=this,e=n.a.storage().ref("profileimg/"),i=document.querySelector("#file").files[0],a=+new Date+"-"+i.name,s={contentType:i.type};e.child(a).put(i,s).then(function(t){return t.ref.getDownloadURL()}).then(function(e){return t.userInfo.profileimg=e})}},beforeMount:function(){this.loadInfo()}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal--main profile__about",staticStyle:{position:"absolute",background:"rgba(0,0,0,0)"}},[i("label",{staticClass:"profile__about__upload"},[i("img",{staticStyle:{cursor:"pointer"},attrs:{alt:"John Doe",src:t.userInfo.profileimg}}),t._v(" "),i("input",{attrs:{id:"file",type:"file"},on:{change:t.uploadFile}})]),t._v(" "),i("div",{staticClass:"profile__about__container"},[i("div",{staticClass:"profile__about__elements"},[t._m(0),t._v(" "),i("div",{staticClass:"profile__about__info profile__about__info--big"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.name,expression:"userInfo.name"}],staticClass:"profile__info__el",attrs:{placeholder:"Name"},domProps:{value:t.userInfo.name},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"name",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.city,expression:"userInfo.city"}],staticClass:"profile__info__el",attrs:{placeholder:"City"},domProps:{value:t.userInfo.city},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"city",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.phone,expression:"userInfo.phone"}],staticClass:"profile__info__el",attrs:{placeholder:"Phone number"},domProps:{value:t.userInfo.phone},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"phone",e.target.value)}}}),t._v(" "),i("div",{staticClass:"profile__info__el",staticStyle:{width:"90%",background:"#2980b9",color:"#fafafa",cursor:"pointer"},on:{click:t.saveInfo}},[t._v("\n\t\t\t\t\t\tSave\n\t\t\t\t\t")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"profile__about__icons"},[e("div",{staticClass:"profile__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"profile__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"profile__about__icon icon"},[this._v("")])])}]},b=i("VU/8")(g,C,!1,null,null,null).exports;i("hZls");window.app=n.a.initializeApp({apiKey:"AIzaSyBpvz3tlCapYuE4tee_C4jGl182ktd98fM",authDomain:"vlocal-ato.firebaseapp.com",databaseURL:"https://vlocal-ato.firebaseio.com",projectId:"vlocal-ato",storageBucket:"vlocal-ato.appspot.com",messagingSenderId:"1006731708417"}),window.db=app.database();var y={name:"App",data:function(){return{user:null,popup:!1,profileimg:"",name:"",loginPopup:!1,addOffer:!1,editProfile:!1}},components:{Login:d,OfferInfo:f,AddOffer:h,EditProfile:b},methods:{logout:function(){var t=this;n.a.database().ref("users/").child(n.a.auth().currentUser.uid).update({isonline:!1}),n.a.auth().signOut().then(function(){t.user=null,t.$toasted.show("Logged out",{theme:"primary",position:"bottom-right",duration:5e3})})}},watch:{user:function(t){var e=this;if(this.user){var i=n.a.auth().currentUser.uid,a=n.a.database().ref("users/").child(i);n.a.database().ref("users/"+i).on("value",function(t){e.name=t.val().name,e.profileimg=t.val().profileimg,a.update({isonline:!0}),a.onDisconnect().update({isonline:!1})},function(t){e.$toasted.show("Error: "+t.code,{theme:"primary",position:"bottom-right",duration:5e3})})}}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("main",{staticClass:"main",class:{"block--blur":t.popup}},[i("header",{staticClass:"header"},[i("div",{staticClass:"header--container"},[i("router-link",{attrs:{to:"/"}},[i("div",{staticClass:"header__logo"},[i("h1",{staticClass:"h1--logo"},[t._v("vLocal")])])]),t._v(" "),t.user?t._e():i("div",{staticClass:"header__btn",on:{click:function(e){t.popup=!t.popup,t.loginPopup=!t.loginPopup}}},[t._v("\n                login\n            ")]),t._v(" "),t.user?i("div",{staticClass:"header__dropdown"},[i("img",{staticClass:"img--header__dropdown",attrs:{src:t.profileimg}}),t._v(" "),i("div",{staticClass:"header__dropdown__content"},[i("router-link",{attrs:{to:"/profile"}},[i("img",{staticClass:"img--header__dropdown",staticStyle:{"margin-right":"0.5em"},attrs:{src:t.profileimg}}),t._v(t._s(t.name))]),t._v(" "),i("a",{attrs:{href:"#"},on:{click:function(e){t.popup=!t.popup,t.addOffer=!t.addOffer}}},[t._v("Add offer")]),t._v(" "),i("a",{attrs:{href:"#"},on:{click:function(e){t.popup=!t.popup,t.editProfile=!t.editProfile}}},[t._v("Edit profile")]),t._v(" "),i("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("Logout")])],1)]):t._e()],1)]),t._v(" "),i("div",{staticClass:"main--container"},[i("router-view")],1),t._v(" "),t._m(0)]),t._v(" "),t.loginPopup?i("Login"):t._e(),t._v(" "),i("OfferInfo",{ref:"offerinfoChild",staticClass:"none",attrs:{id:"offerInfo"}}),t._v(" "),t.addOffer?i("AddOffer"):t._e(),t._v(" "),t.editProfile?i("EditProfile"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("div",{staticClass:"footer--container"},[e("div",[this._v("Made with "),e("span",{staticStyle:{"font-family":"FontAwesome"}},[this._v("")]),this._v(" by "),e("a",{attrs:{href:"https://github.com/TheAdrik"}},[this._v("Adrian Orłów")])]),this._v(" "),e("a",{staticClass:"footer__github",attrs:{href:"https://github.com/TheAdrik/vLocal"}},[e("img",{staticClass:"footer__github--img",attrs:{src:"https://assets-cdn.github.com/images/modules/logos_page/GitHub-Logo.png"}})])])])}]};var w=i("VU/8")(y,I,!1,function(t){i("X3BF")},null,null).exports,$=i("/ocq");window.latestOffersRef=db.ref("offers").limitToFirst(3),window.offersRef=db.ref("offers");var k={name:"Main",data:function(){return{user:null,search:null}},firebase:{latestOffers:latestOffersRef,offers:offersRef},watch:{user:function(t){t&&(this.$parent.user=t)}},methods:{moreInfo:function(t){var e=this.$parent.$refs.offerinfoChild.moreInfo;e.title=t.title,e.desc=t.desc,e.price=t.price,e.local=t.local,e.date=t.date,e.img=t.img,e.isvalid=t.isvalid,e.authoruid=t.authoruid,e.key=t[".key"],document.getElementById("offerInfo").classList.remove("none"),this.$parent.$refs.offerinfoChild.loadInfo(),this.$parent.popup=!0}},computed:{filteredOffers:function(){var t=this;if(this.search)return this.offers.filter(function(e){return-1!==e.title.toLowerCase().indexOf(t.search.toLowerCase())})}}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"section section--latest"},[i("div",{staticClass:"latest--container"},[i("div",{staticClass:"section--search"},[i("div",{staticClass:"search--container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search__input",attrs:{placeholder:"Search for anything",maxlength:"55"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),i("div",{staticClass:"search__btn"},[t._v("")])])]),t._v(" "),t.search?t._e():i("div",[i("h1",{staticClass:"latest--title"},[t._v("Latest offers")]),t._v(" "),i("div",{staticClass:"latest--grid"},t._l(t.latestOffers,function(e){return i("div",{key:e.id,staticClass:"card",on:{click:function(i){t.moreInfo(e)}}},[t._m(0,!0),t._v(" "),i("img",{staticClass:"card__img",attrs:{src:e.img,alt:e.title}}),t._v(" "),i("div",{staticClass:"card__container"},[i("h2",{staticClass:"card__title"},[t._v(t._s(e.title))])]),t._v(" "),i("div",{staticClass:"card__info info__city"},[t._v(t._s(e.local))]),t._v(" "),i("div",{staticClass:"card__info info__price"},[t._v(t._s(e.price))])])}))]),t._v(" "),t.search?i("div",[i("h1",{staticClass:"filtered--title"},[t._v('Search results for "'+t._s(t.search)+'":')]),t._v(" "),!t.filteredOffers.length&&t.search?i("div",{staticClass:"search__noresults"},[t._v("NO RESULTS")]):t._e(),t._v(" "),i("div",{staticClass:"filtered--grid"},t._l(t.filteredOffers,function(e){return 1==e.isvalid?i("div",{key:e.id,staticClass:"card",on:{click:function(i){t.moreInfo(e)}}},[t._m(1,!0),t._v(" "),i("img",{staticClass:"card__img",attrs:{src:e.img,alt:e.title}}),t._v(" "),i("div",{staticClass:"card__container"},[i("h2",{staticClass:"card__title"},[t._v(t._s(e.title))])]),t._v(" "),i("div",{staticClass:"card__info info__city"},[t._v(t._s(e.local))]),t._v(" "),i("div",{staticClass:"card__info info__price"},[t._v(t._s(e.price))])]):t._e()}))]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__loading"},[e("i",{staticClass:"fa fa-circle-o-notch fa-spin"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card__loading"},[e("i",{staticClass:"fa fa-circle-o-notch fa-spin"})])}]},x=i("VU/8")(k,O,!1,null,null,null).exports,P=i("fZjL"),S=i.n(P),E={name:"Profile",data:function(){return{message:"",useruid:"",messaging:!1,chatsShow:!1,conversatorsUidsRef:{},userInfo:{name:"",city:"",phone:"",profileimg:"",isonline:null},conversatorInfo:{name:"",profileimg:"",isonline:null}}},beforeCreate:function(){null==this.$parent.user&&this.$router.replace("/")},methods:{loadInfo:function(){var t=this,e=n.a.auth().currentUser.uid;this.useruid=e,n.a.database().ref("users/"+e).on("value",function(e){t.userInfo.name=e.val().name,t.userInfo.city=e.val().city,t.userInfo.phone=e.val().phone,t.userInfo.profileimg=e.val().profileimg,t.userInfo.isonline=e.val().isonline},function(e){t.$toasted.show("Error: "+e.code,{theme:"primary",position:"bottom-right",duration:5e3})}),n.a.database().ref("users/"+e+"/conversators").once("value",function(e){null!=e.val()&&(t.conversatorsUidsRef=S()(e.val()))});var i=n.a.database().ref().child("users");this.$bindAsArray("conversators",i),this.chatsShow=!0},startChat:function(t){var e=this,i=this.$parent.user.uid,a=t[".key"],s=i<a?i+"_"+a:a+"_"+i;window.messagesRef=n.a.database().ref("chats/"+s).child("messages"),n.a.database().ref("chats").orderByKey().equalTo(s).once("value",function(t){t.val();e.$bindAsArray("messages",messagesRef)}),n.a.database().ref("users/"+t[".key"]).on("value",function(t){e.conversatorInfo.name=t.val().name,e.conversatorInfo.profileimg=t.val().profileimg,e.conversatorInfo.isonline=t.val().isonline}),this.messaging=!0},sendMessage:function(){var t=new Date;messagesRef.push({text:this.message,time:t,uid:this.$parent.user.uid})}},beforeMount:function(){this.loadInfo()}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section section--profile"},[i("div",{staticClass:"profile__about"},[i("img",{attrs:{src:t.userInfo.profileimg,alt:t.userInfo.name}}),t._v(" "),i("div",{staticClass:"profile__about__container"},[i("div",{staticClass:"profile__about__elements"},[t._m(0),t._v(" "),i("div",{staticClass:"profile__about__info profile__about__info--big"},[i("div",{staticClass:"profile__info__el"},[t._v(t._s(t.userInfo.name))]),t._v(" "),i("div",{staticClass:"profile__info__el"},[t._v(t._s(t.userInfo.city))]),t._v(" "),i("div",{staticClass:"profile__info__el"},[t._v(t._s(t.userInfo.phone))]),t._v(" "),t.userInfo.isonline?i("div",{staticClass:"profile__info__el info__el--green",staticStyle:{width:"90%"}},[t._v("Online")]):i("div",{staticClass:"profile__info__el info__el--red",staticStyle:{width:"90%"}},[t._v("Offline")])])])])]),t._v(" "),i("div",{staticClass:"profile__messages"},[i("div",{staticClass:"profile__messages__list"},[i("div",{staticClass:"messages__list__title"},[t._v("\n                Messages\n            ")]),t._v(" "),t.chatsShow&&t.conversatorsUidsRef.length>0?i("div",{staticClass:"messages__list__grid"},t._l(t.conversators,function(e){return t.conversatorsUidsRef.includes(e[".key"])?i("div",{key:e.id,staticClass:"messages__list__element",on:{click:function(i){t.startChat(e)}}},[i("img",{staticClass:"contact__chat__img",staticStyle:{height:"100%","vertical-align":"middle"},attrs:{src:e.profileimg,alt:e.name}}),t._v(" "),i("p",{staticClass:"contact__chat__top__name"},[t._v(t._s(e.name))])]):t._e()})):t._e()]),t._v(" "),t.messaging?i("div",{staticClass:"profile__messages__box"},[i("div",{staticClass:"contact__chat__top",staticStyle:{position:"relative"}},[i("div",{staticClass:"contact__chat__top__container"},[i("img",{staticClass:"contact__chat__img",staticStyle:{height:"100%","vertical-align":"middle"},attrs:{src:t.conversatorInfo.profileimg,alt:t.conversatorInfo.name}}),t._v(" "),i("p",{staticClass:"contact__chat__top__name"},[t._v(t._s(t.conversatorInfo.name))])])]),t._v(" "),i("div",{staticClass:"contact__chat__box",staticStyle:{position:"relative",top:"0"}},[i("div",{staticClass:"contact__chat__grid"},t._l(t.messages,function(e){return i("div",{key:e.id,staticClass:"contact__chat__message"},[e.uid!=t.useruid?i("img",{staticClass:"contact__chat__img",attrs:{src:t.userInfo.profileimg,alt:t.userInfo.name}}):t._e(),t._v(" "),e.uid!=t.useruid?i("div",{staticClass:"contact__chat__text"},[t._v(t._s(e.text))]):i("div",{staticClass:"contact__chat__text chat__text--right"},[t._v(t._s(e.text))])])}))]),t._v(" "),i("div",{staticClass:"contact__chat__bottom",staticStyle:{position:"relative"}},[i("div",{staticClass:"contact__chat__bottom__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"contact__chat__bottom__input",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),i("div",{staticClass:"contact__chat__bottom__send",on:{click:t.sendMessage}},[t._v("")])])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"profile__about__icons"},[e("div",{staticClass:"profile__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"profile__about__icon icon"},[this._v("")]),this._v(" "),e("div",{staticClass:"profile__about__icon icon"},[this._v("")])])}]},N=i("VU/8")(E,L,!1,null,null,null).exports;a.a.use($.a);var R=new $.a({routes:[{path:"/",name:"Main",component:x},{path:"/profile",name:"Profile",component:N}]});a.a.use(l.a),a.a.config.productionTip=!1,a.a.use(o.a),new a.a({el:"#app",router:R,components:{App:w},template:"<App/>"})},X3BF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.03f4ae6a2f1818188309.js.map